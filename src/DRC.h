#ifndef DRC_H
#define DRC_H

#include "Arduino.h"
class DRC {
	public:
	DRC(float fs, float T,float tauAtt,float tauRel, float R,float w, float mu);
	int16_t softKnee(float x);
	
	private:
	float log10f_approx(float X);
	float _T;
    float _alphAtt;
	float _alphRel;
	float _slope;
	float _yprev;
	float _w; 
	float _mu;
	float _w4;
 	
};
static const float G[193]={0.00001585, 0.00001778, 0.00001995, 0.00002239, 0.00002512, 0.00002818, 0.00003162, 0.00003548, 0.00003981, 0.00004467, 0.00005012, 0.00005623, 0.00006310, 0.00007079, 0.00007943, 0.00008913, 0.00010000, 0.00011220, 0.00012589, 0.00014125, 0.00015849, 0.00017783, 0.00019953, 0.00022387, 0.00025119, 0.00028184, 0.00031623, 0.00035481, 0.00039811, 0.00044668, 0.00050119, 0.00056234, 0.00063096, 0.00070795, 0.00079433, 0.00089125, 0.00100000, 0.00112202, 0.00125893, 0.00141254, 0.00158489, 0.00177828, 0.00199526, 0.00223872, 0.00251189, 0.00281838, 0.00316228, 0.00354813, 0.00398107, 0.00446684, 0.00501187, 0.00562341, 0.00630957, 0.00707946, 0.00794328, 0.00891251, 0.01000000, 0.01122018, 0.01258926, 0.01412538, 0.01584893, 0.01778279, 0.01995262, 0.02238721, 0.02511886, 0.02818383, 0.03162277, 0.03548133, 0.03981072, 0.04466835, 0.05011873, 0.05623413, 0.06309573, 0.07079458, 0.07943282, 0.08912510, 0.10000000, 0.11220185, 0.12589255, 0.14125374, 0.15848932, 0.17782794, 0.19952624, 0.22387213, 0.25118864, 0.28183830, 0.31622776, 0.35481340, 0.39810717, 0.44668359, 0.50118721, 0.56234133, 0.63095737, 0.70794576, 0.79432821, 0.89125097, 1.00000000, 1.12201846, 1.25892544, 1.41253757, 1.58489323, 1.77827942, 1.99526238, 2.23872113, 2.51188660, 2.81838274, 3.16227770, 3.54813409, 3.98107195, 4.46683550, 5.01187229, 5.62341309, 6.30957365, 7.07945824, 7.94328213, 8.91250896, 10.00000000, 11.22018337, 12.58925438, 14.12537479, 15.84893322, 17.78279495, 19.95262146, 22.38721275, 25.11886215, 28.18383217, 31.62277603, 35.48133469, 39.81071854, 44.66835785, 50.11872864, 56.23413086, 63.09572601, 70.79458618, 79.43281555, 89.12510681, 100.00000000, 112.20183563, 125.89251709, 141.25378418, 158.48933411, 177.82794189, 199.52621460, 223.87207031, 251.18870544, 281.83831787, 316.22778320, 354.81335449, 398.10708618, 446.68368530, 501.18728638, 562.34130859, 630.95727539, 707.94561768, 794.32843018, 891.25103760, 1000.00000000, 1122.01831055, 1258.92517090, 1412.53784180, 1584.89331055, 1778.27941895, 1995.26208496, 2238.72070312, 2511.88696289, 2818.38330078, 3162.27758789, 3548.13354492, 3981.07080078, 4466.83691406, 5011.87304688, 5623.41308594, 6309.57275391, 7079.45605469, 7943.28417969, 8912.51074219, 10000.00000000, 11220.18945313, 12589.25195313, 14125.37890625, 15848.92480469, 17782.79492187, 19952.63281250, 22387.20703125, 25118.86914062, 28183.81640625, 31622.77734375, 35481.35546875, 39810.70703125, 44668.36718750, 50118.70312500, 56234.13281250, 63095.76171875};
#endif